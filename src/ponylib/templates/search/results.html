{% extends "base.html" %}

{% block head_css %}
    {% if debug %}
    {# TMP for debug  #}
    <link rel="stylesheet" href="{{ STATIC_URL }}css/prettify.css?{{ STATIC_KEY }}" />
    {% endif %}
{% endblock %}

{% block head_scripts %}
    {% if debug %}
    <script type="text/javascript" src="{{ STATIC_URL }}scripts/min/prettify.js?{{ STATIC_KEY }}"></script>
    <script type="text/javascript">
    jQuery(window).on('load', prettyPrint);
    </script>
    {% endif %}
{% endblock %}

{% block content %}
    {% if debug %}
    <div class="debug">
        Type <code>{{ type }}</code>.<br/>
        Request params:
        <pre class="prettyprint linenums languague-python">{{ debug.request_params }}</pre>

        Query:
        <pre class="prettyprint linenums languague-sql">{{ debug.qs_query }}</pre>

        Query params:
        <pre class="prettyprint linenums languague-python">{{ debug.qs_params }}</pre>
    </div>
    {% endif %}
    <div>
    {% for book in results %}
        <div class="book">
            <h3>{{ book.title }}
                {% if debug %} (rel: {{ book.relevance }}, id: {{ book.id }}){% endif %}
            </h3>
            <ul>
                <li>Authors: {{ book.authors.all }}</li>
                <li>Genres: {{ book.genres.all }}</li>
                <li>Annotation: {{ book.annotation }}</li>
            </ul>

        </div>
    {% empty %}
        <p class="no_results">No results</div>
    {% endfor %}

    </div>

{% endblock %}